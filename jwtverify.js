const jwt = require('jsonwebtoken')
// const token = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjVEVlJCOTFhOFZlLVhiZzZvT0ZhciJ9.eyJpc3MiOiJodHRwczovL2lnbmFjaW8tYmVuaXRlei5ldS5hdXRoMC5jb20vIiwic3ViIjoiZ29vZ2xlLW9hdXRoMnwxMTI5NDExNTI2NTUwNTU3MjU2ODkiLCJhdWQiOiJ3VFVaRmI1M0VUY3UxZjZHODIwSDBxU2JQa1lOdEFCNyIsImlhdCI6MTYyMDgyODgyNywiZXhwIjoxNjIwODY0ODI3LCJhdF9oYXNoIjoiWVV2UFBLVy1PbUh0VXkxZVZhN1NkUSIsIm5vbmNlIjoiSEtweWNtTVg4RmcwSnVIUWxiWGp-NHFzUTRpN2pNWjEifQ.sRVGqpqwahqG4rHZR8lN2amHfXEQcc1qdfordm0uXqBd_Ufyi1MyEGDqM0k9mFApP2psm4pPFs3j4_LkQtj-8_TDNqt_LJTNPvty1Otqq_KNkuW68LMYYP69e8d1W0srQgfdIMd2sTKSLJUkl-h_-qR28GlcYbc8P6dr4A4ELwGnuJO7NXQHzw7NfKI7UKmMpj3oS8yzg1QyVu1Tgh7Bwri44_2Frsf7wpcFl9fvowCyEopKHVbNzjT8dyA1CR44sxvdgD3ifazxtTG9tOY-rokbB4xrWZgYLIOZltn-VVCqbA83XUbYOzbuUp0tKI4HcbdvXXNbADKtROlPyj4mEA'
const token = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjVEVlJCOTFhOFZlLVhiZzZvT0ZhciJ9.eyJnaXZlbl9uYW1lIjoiSWduYWNpbyIsImZhbWlseV9uYW1lIjoiQmVuw610ZXoiLCJuaWNrbmFtZSI6ImlnbmFjaW8uYmVuaXRleiIsIm5hbWUiOiJJZ25hY2lvIEJlbsOtdGV6IiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hLS9BT2gxNEdpdVhNdFJPakQyaEVYRElJM25FOEY2Uko2c0YzT2xaX0FyUktjLT1zOTYtYyIsImxvY2FsZSI6ImVuIiwidXBkYXRlZF9hdCI6IjIwMjEtMDUtMTJUMTQ6MzY6MDUuMjU5WiIsImlzcyI6Imh0dHBzOi8vaWduYWNpby1iZW5pdGV6LmV1LmF1dGgwLmNvbS8iLCJzdWIiOiJnb29nbGUtb2F1dGgyfDExMjk0MTE1MjY1NTA1NTcyNTY4OSIsImF1ZCI6IndUVVpGYjUzRVRjdTFmNkc4MjBIMHFTYlBrWU50QUI3IiwiaWF0IjoxNjIwODMwMTY4LCJleHAiOjE2MjA4NjYxNjgsImF0X2hhc2giOiJ0OEtvbVpPRUJTV2RXUHpGSnVCcUdRIiwibm9uY2UiOiIuMnlhWHM0LTR-bXNJWmZoVjhRTVpzOUVOS09WSXV3SSJ9.OEGmv-Hpys9ewUy9ajPZVoqaciFWgh03cvEGq5zMB6i6T_ljfcpzP-q27np5xBxKeYyHzrOuYVTmt3LymkFezrpMCygGvV_zbbtzADRXl30jDLt1ngMvXn2cQBWkKJ09mTbevrBW9m5d5wByJ9hly1etvqf0ZpJ3ubQqfT5SgU7xLDkzGSOLU2B2olYm7d89Us5yATbyg6Q6FwbBiRWSchfgOmAX92hwsaSteFG_Tj4JjQj127yd_pHsn3cUQ0zy2Wzd6fC5TKkOTG47AK6wNzFNAEu5j3ekmFqj1OLu4ORApGEx-2ZWA1wcr439udYP_DltOsY39aCWZ68-VfFYrw'
var jwksClient = require('jwks-rsa');
var client = jwksClient({
  jwksUri: 'https://ignacio-benitez.eu.auth0.com/.well-known/jwks.json'
});
function getKey(header, callback){
  client.getSigningKey(header.kid, function(err, key) {
    var signingKey = key.publicKey || key.rsaPublicKey;
    callback(null, signingKey);
  });
}
jwt.verify(token, getKey, {}, function(err, decoded) {
  console.log(decoded);
});
